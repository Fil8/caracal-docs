

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Continuum imaging and self-calibration &mdash; MeerKATHI  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Spectral line imaging" href="../line/index.html" />
    <link rel="prev" title="Cross-calibration" href="../crosscal/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> MeerKATHI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../meerkathiREADME.html">Download &amp; Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../intro/index.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configfile/index.html">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../products/index.html">Data products</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Data reduction</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../prepare/index.html">Prepare pipeline and data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flag/index.html">Flag data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crosscal/index.html">Cross-calibration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Continuum imaging and self-calibration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#split-average-and-flag-target-visibilities">Split, average and flag target visibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#image-the-continuum-and-self-calibrate">Image the continuum and self-calibrate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gain-and-model-transfer">Gain and model transfer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../line/index.html">Spectral line imaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../workers/index.html">Workers parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../credits/index.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">MeerKATHI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Manual</a> &raquo;</li>
        
          <li><a href="../index.html">Data reduction</a> &raquo;</li>
        
      <li>Continuum imaging and self-calibration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/manual/reduction/selfcal/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="continuum-imaging-and-self-calibration">
<h1>Continuum imaging and self-calibration<a class="headerlink" href="#continuum-imaging-and-self-calibration" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p><strong>[relevant workers:</strong> <a class="reference internal" href="../../workers/split_target/index.html#split-target"><span class="std std-ref">split_target</span></a>, <a class="reference internal" href="../../workers/flagging/index.html#flagging"><span class="std std-ref">flagging</span></a>, <a class="reference internal" href="../../workers/self_cal/index.html#self-cal"><span class="std std-ref">self_cal</span></a><strong>]</strong></p>
<div class="section" id="split-average-and-flag-target-visibilities">
<h2>Split, average and flag target visibilities<a class="headerlink" href="#split-average-and-flag-target-visibilities" title="Permalink to this headline">¶</a></h2>
<p>Following cross-calibration MeerKATHI creates a new .MS file which contains the
cross-calibrated target visibilities only. This is done by the <a class="reference internal" href="../../workers/split_target/index.html#split-target"><span class="std std-ref">split_target</span></a>
worker. In case the cross-calibration tables have not been applied to the target
by the <a class="reference internal" href="../../workers/cross_cal/index.html#cross-cal"><span class="std std-ref">cross_cal</span></a> worker, <a class="reference internal" href="../../workers/split_target/index.html#split-target"><span class="std std-ref">split_target</span></a> can do so on the fly while
splitting using the CASA task MSTRANSFORM.</p>
<p>Optionally, the <a class="reference internal" href="../../workers/split_target/index.html#split-target"><span class="std std-ref">split_target</span></a> worker can average in time and/or frequency
while splitting. Depending on the science goals, it might be useful to run this
worker more than once. E.g., the first time to create a frequency-averaged dataset
for continuum imaging and self-calibration, and the second time to create a
narrow-band dataset for spectral-line work. The possibility of running this
worker multiple times within a single MeerKATHI run allows users to design the
best strategy for their project.</p>
<p>Before self-calibrating it might also be good to flag the target’s visibilities.
(Typically the target is not flagged before applying the cross-calibration.) This can
be done with the <a class="reference internal" href="../../workers/flagging/index.html#flagging"><span class="std std-ref">flagging</span></a> worker (which was probably already run on the
calibrators’ visibilities before cross-calibration) setting fields to target in
<a class="reference internal" href="../../workers/flagging/index.html#flagging-autoflag-rfi"><span class="std std-ref">flagging: autoflag_rfi</span></a>.</p>
</div>
<div class="section" id="image-the-continuum-and-self-calibrate">
<h2>Image the continuum and self-calibrate<a class="headerlink" href="#image-the-continuum-and-self-calibrate" title="Permalink to this headline">¶</a></h2>
<p>Having split, optionally averaged and flagged the target, it is now possible to
iteratively image the radio continuum emission and self-calibrate the visibilities.
The resulting gain tables and continuum model can also be transferred to another
.MS file (particularly useful for spectral line work). All this can be done with the
<a class="reference internal" href="../../workers/self_cal/index.html#self-cal"><span class="std std-ref">self_cal</span></a> worker.</p>
<p>Several parameters allow users to set up both the imaging and self-calibration
according to their needs. Imaging is done with WSclean, and the parameters of this
imaging software are available in the <a class="reference internal" href="../../workers/self_cal/index.html#self-cal"><span class="std std-ref">self_cal</span></a> worker. Calibration is done
with either Cubical or MeqTrees, and also in this case the <a class="reference internal" href="../../workers/self_cal/index.html#self-cal"><span class="std std-ref">self_cal</span></a> worker
includes the parameters available in those packages.</p>
<p>Additional parameters allow users to decide how many calibration iterations to
perform through the parameter <a class="reference internal" href="../../workers/self_cal/index.html#self-cal-cal-niter"><span class="std std-ref">self_cal: cal_niter</span></a>.
For a value N, the code will create N+1 images following the sequence image1,
selfcal1, image2, selfcal2, … imageN, selfcalN, imageN+1.</p>
<p>Optionally, users can enable <a class="reference internal" href="../../workers/self_cal/index.html#self-cal-aimfast"><span class="std std-ref">self_cal: aimfast</span></a>, which
at each new iteration compares the new continuum image with the previous one and
decides whether the image has improved significantly. In case it has not, no further
iterations are performed. In this case therefore <a class="reference internal" href="../../workers/self_cal/index.html#self-cal-cal-niter"><span class="std std-ref">self_cal: cal_niter</span></a>
is the maximum number of iterations.</p>
<p>While imaging, WSclean auto-mask and auto-threshold can be used, but it is also possible
to use a clean mask made by SoFiA from the previous continuum image. This functionality
is controlled through <a class="reference internal" href="../../workers/self_cal/index.html#self-cal-sofia-mask"><span class="std std-ref">self_cal: sofia_mask</span></a>.</p>
<p><strong>[missing a description of additional functionalities]</strong></p>
</div>
<div class="section" id="gain-and-model-transfer">
<h2>Gain and model transfer<a class="headerlink" href="#gain-and-model-transfer" title="Permalink to this headline">¶</a></h2>
<p>If the self-cal loop was executed on a frequency-averaged .MS file, it might
be necessary to transfer the resulting gains and continuum model back to the
original .MS file. This is done with
<a class="reference internal" href="../../workers/self_cal/index.html#self-cal-transfer-apply-gains"><span class="std std-ref">self_cal: transfer_apply_gains</span></a> (using Cubical)
and <a class="reference internal" href="../../workers/self_cal/index.html#self-cal-transfer-model"><span class="std std-ref">self_cal: transfer_model</span></a> (using Crystalball),
respectively. The latter allows users to limit the model transfer to the N brightest
sources, to sources in a region, or to point sources only.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../line/index.html" class="btn btn-neutral float-right" title="Spectral line imaging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../crosscal/index.html" class="btn btn-neutral float-left" title="Cross-calibration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, MeerKATHI team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>